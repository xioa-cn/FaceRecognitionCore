<Window x:Class="FaceRecognitionCore.MainWindow"
        xmlns="http://schemas.microsoft.com/winfx/2006/xaml/presentation"
        xmlns:x="http://schemas.microsoft.com/winfx/2006/xaml"
        xmlns:d="http://schemas.microsoft.com/expression/blend/2008"
        xmlns:mc="http://schemas.openxmlformats.org/markup-compatibility/2006"
        xmlns:local="clr-namespace:FaceRecognitionCore"
        mc:Ignorable="d"
        Title="人脸识别系统" Height="700" Width="1000">
    <Grid>
        <Grid.ColumnDefinitions>
            <ColumnDefinition Width="*"/>
            <ColumnDefinition Width="300"/>
        </Grid.ColumnDefinitions>
        
        <Grid Grid.Column="0">
            <Grid.RowDefinitions>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <Image x:Name="imgCamera" Grid.Row="0" Margin="10"/>
            
            <Border Grid.Row="1" Background="#4CAF50" Margin="10,5" 
                    CornerRadius="5" Padding="10">
                <TextBlock x:Name="txtRecognitionResult" 
                          Foreground="White" FontSize="20" 
                          TextAlignment="Center"/>
            </Border>
            
            <StackPanel Grid.Row="2" Orientation="Horizontal" 
                        HorizontalAlignment="Center" Margin="10">
                <Button x:Name="btnStartCamera" Content="启动摄像头" 
                        Width="100" Margin="5" Click="btnStartCamera_Click"/>
                <Button x:Name="btnStopCamera" Content="停止摄像头" 
                        Width="100" Margin="5" Click="btnStopCamera_Click"/>
            </StackPanel>
        </Grid>

        <Grid Grid.Column="1" Margin="10">
            <Grid.RowDefinitions>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="Auto"/>
                <RowDefinition Height="200"/>
                <RowDefinition Height="*"/>
                <RowDefinition Height="Auto"/>
            </Grid.RowDefinitions>

            <GroupBox Header="人脸录入" Grid.Row="0" Padding="5">
                <StackPanel>
                    <TextBlock Text="姓名：" Margin="0,5"/>
                    <TextBox x:Name="txtPersonName" Margin="0,5"/>
                    <Button x:Name="btnCaptureFace" Content="开始采集人脸" 
                            Margin="0,5" Click="btnCaptureFace_Click"/>
                    <TextBlock x:Name="txtCaptureStatus" Margin="0,5" 
                              TextWrapping="Wrap" Foreground="Green"/>
                </StackPanel>
            </GroupBox>

            <GroupBox Header="采集预览" Grid.Row="2" Padding="5">
                <Grid>
                    <Image x:Name="imgPreview" Stretch="Uniform"/>
                    <TextBlock x:Name="txtPreviewHint" 
                              HorizontalAlignment="Center" 
                              VerticalAlignment="Center"
                              Text="请将人脸对准摄像头"/>
                </Grid>
            </GroupBox>

            <GroupBox Header="已录入人脸" Grid.Row="3" Padding="5">
                <ListView x:Name="lvPersons" SelectionMode="Single">
                    <ListView.View>
                        <GridView>
                            <GridViewColumn Header="姓名" DisplayMemberBinding="{Binding Name}" Width="120"/>
                            <GridViewColumn Header="样本数" DisplayMemberBinding="{Binding SampleCount}" Width="60"/>
                        </GridView>
                    </ListView.View>
                </ListView>
            </GroupBox>

            <Button x:Name="btnTrainModel" Content="训练模型" 
                    Grid.Row="4" Margin="5" Click="btnTrainModel_Click"/>
        </Grid>
    </Grid>
</Window>
